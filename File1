<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Chart Example</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #chart, #lineChart, #pieChart { width: 600px; height: 400px; margin-top: 30px; }
        img { margin-top: 20px; width: 200px; }
    </style>
</head>
<body>

<h2>Enter your student number:</h2>

<form method="post">
    <input type="text" name="username" required>
    <button type="submit">Submit</button>
</form>

<?php
if ($_SERVER["REQUEST_METHOD"] == "POST" && !empty($_POST['username'])) {
    $username = htmlspecialchars($_POST['username']);

    // Sample student number
    $student_number = "username";

    // Extract each digit
    $digits = str_split($username);

    // Map months to digits
    $months = ["January", "February", "March", "April", "May", "June"];

    echo "<h3>Hello, $username! <br><br> Here are your charts based on student number $username.</h3>";
    ?>

    <!-- Bar Chart -->
    <div id="chart"></div>
    <!-- Line Chart -->
    <div id="lineChart"></div>
    <!-- Pie Chart -->
    <div id="pieChart"></div>

    <script>
        // Prepare data
        const months = <?php echo json_encode($months); ?>;
        const values = <?php echo json_encode(array_map('intval', $digits)); ?>;

        // Initialize the Bar Chart
        var chartDom = document.getElementById('chart');
        var myChart = echarts.init(chartDom);
        var option = {
            title: {
                text: 'Monthly Values (Bar Chart)'
            },
            tooltip: {},
            xAxis: {
                type: 'category',
                data: months
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                name: 'Value',
                type: 'bar',
                data: values
            }]
        };
        myChart.setOption(option);

        // Initialize the Line Chart
        var lineChartDom = document.getElementById('lineChart');
        var lineChart = echarts.init(lineChartDom);
        var lineOption = {
            title: {
                text: 'Monthly Values (Line Chart)'
            },
            tooltip: {},
            xAxis: {
                type: 'category',
                data: months
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                name: 'Value',
                type: 'line',
                data: values
            }]
        };
        lineChart.setOption(lineOption);

        // Initialize the Pie Chart
        var pieChartDom = document.getElementById('pieChart');
        var pieChart = echarts.init(pieChartDom);
        var pieOption = {
            title: {
                text: 'Monthly Distribution (Pie Chart)',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            series: [{
                name: 'Value Distribution',
                type: 'pie',
                radius: '50%',
                data: months.map((month, index) => ({
                    name: month,
                    value: values[index] || 0
                }))
            }]
        };
        pieChart.setOption(pieOption);
    </script>

    <!-- Example image below -->
    <img src="php-vs-javascript.jpg" alt="Student Image">

<?php
}
?>

</body>
</html>
